<!DOCTYPE html>
<html lang="pt-br">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gerador HDM</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            margin-bottom: 5px;
        }

        body {
            max-width: 600px;
            margin: auto;
            background-color: lightskyblue;
        }

        main {
            background-color: #fff;
            display: flex;
            flex-direction: column;
            height: 400px;
            width: 100%;
            margin-top: 100px;
            padding: 10px;
            border-radius: 30px;
            box-shadow: 5px 5px 10px rgba(0, 0, 0, 0.473);
        }

        .types {
            width: 30%;
            display: flex;
            justify-content: space-between;
        }

        input[type=text] {
            width: calc(100% / 2 - 68px);
            height: 30px;
            border-radius: 20px;
            border: 1px solid black;
            text-align: center;
        }

        #gerador {
            display: flex;
            flex-wrap: wrap;
        }

        #gerador input {
            margin-right: 5px;
        }

        #resultado input {
            width: calc(100% - 130px);
        }

        button {
            cursor: pointer;
            width: 120px;
            height: 30px;
            border-radius: 20px;
            border: none;
            background-color: paleturquoise;
        }

        button:hover:enabled {
            background-color: #2196F3;
        }

        button:disabled {
            cursor: not-allowed;
        }
    </style>
</head>

<body>
    <main>
        <h1>Gerador HDM</h1>
        <div id="networks">
            <h3>Redes:</h3>
            <div id="ntw-2g">
                <p>2.4GHz <input type="checkbox" name="2g" id="2g" checked></p>
            </div>
            <div id="ntw-5g">
                <label>
                    <p>5.0GHz <input type="checkbox" name="check5g" id="5g" onchange="onlyOneCheck5G(this); checkIsOther5G();" checked></p>
                </label>
                <label>
                    <p>5.0GHz diferente <input type="checkbox" name="check5g" id="other5" onchange="onlyOneCheck5G(this); checkIsOther5G(); "></p>
                </label>
            </div>
        </div>
        <div id="opts">
            <h3>Opções:</h3>
            <p>SSID <input type="checkbox" name="opt-ssid" id="opt-ssid" checked></p>
            <p>Password <input type="checkbox" name="opt-password" id="opt-password" checked></p>
        </div>
        <div id="gerador">
            <input type="text" id="ssid" placeholder="SSID">
            <input type="text" id="password" placeholder="Password">
            <button onclick="createJSON()" id="create">Gerar</button>
        </div>
        <div id="resultado">
                <input type="text" id="result" readonly="readonly">
                <button onclick="copy('result')" id="btn-result2" disabled="disabled">Copiar</button>
        </div>
    </main>
    <script>
        function createInputSSID5G(parent) {
            const ssid5 = document.createElement('input')
            Object.assign(ssid5, {
                type: 'text',
                id: 'ssid5',
                placeholder: 'SSID 5.0GHz'
            })
            parent.appendChild(ssid5)
        }
        function createInputPassword5G(parent) {
            const pw5 = document.createElement('input')
            Object.assign(pw5, {
                type: 'text',
                id: 'password5',
                placeholder: 'Password 5.0GHz'
            })
            parent.appendChild(pw5)
        }
        function removeInput5G(parent) {
            const ssid5 = document.getElementById('ssid5') || undefined
            const password5 = document.getElementById('password5') || undefined
            if (ssid5 != undefined) {
                parent.removeChild(ssid5)
                parent.removeChild(password5)
            }
        }
        function checkIsOther5G() {
            limparResultado()
            addDisabled()
            const checkBox = document.getElementById('other5')
            const parent = document.getElementById('gerador')
            if (checkBox.checked == true) {
                const check5G = document.getElementById('ssid5') || undefined
                if (!check5G) {
                    createInputSSID5G(parent)
                    createInputPassword5G(parent)
                }
            } else {
                removeInput5G(parent)
            }
        }
        function onlyOneCheck5G(checkbox) {
            let checkboxes = document.getElementsByName('check5g')
            checkboxes.forEach((item) => {
            if (item !== checkbox) item.checked = false
        })
}
        function checkChar(ssid, password) {
            if (ssid == "" || password == "") {
                alert("Digite o SSID e Senha!!")
                return false
            } else if (password.length < 8) {
                alert("Senha precisa ter mais que oito digitos!")
                return false
            } else {
                return true
            }
        }
        function createJSON() {

            const is2G = document.getElementById("2g").checked
            const is5G = document.getElementById("5g").checked
            const isOther5 = document.getElementById('other5').checked

            reset2G()
            limparResultado()

            const ssid = document.getElementById('ssid').value || undefined
            const password = document.getElementById('password').value || undefined

            if (checkChar(ssid, password)) {

                const createWifi2 = (ssid1, password1) => JSON.stringify({ index: "1", ssid: ssid1, password: password1 })
                const createWifi5 = (ssid1, password1) => JSON.stringify({ index: "5", ssid: `${ssid1}-5G`, password: password1 })
                const createOnly5 = (ssid1, password1) => JSON.stringify({ index: "5", ssid: ssid1, password: password1 })

                if (is2G && is5G) {
                    const wifi2 = createWifi2(ssid, password)
                    const wifi5 = createWifi5(ssid, password)
                    const result = `[${wifi2},${wifi5}]`
                    document.getElementById('result').setAttribute('value', result)
                    
                } else if (isOther5) {
                    const ssid5 = document.getElementById('ssid5').value
                    const pw5 = document.getElementById('password5').value
                    
                    if (checkChar(ssid5, pw5)) {
                        const wifi2 = createWifi2(ssid, password)
                        const wifi5 = createOnly5(ssid5, pw5)
                        const result = `[${wifi2},${wifi5}]`
                        document.getElementById('result').setAttribute('value', result)
    
                    }
                } else if(is5G){
                    const wifi5 = createOnly5(ssid, password)
                    document.getElementById('result').setAttribute('value', wifi5)
                } else {
                    const wifi2 = createWifi2(ssid, password)
                    document.getElementById('result').setAttribute('value', wifi2)
                }
            }
        }
        function addDisabled() {
            const btn2 = document.getElementById("btn-result2")
            btn2.setAttribute("disabled", "disabled")
        }
        function removeDisabled(btn) {
            if (btn.hasAttribute('disabled')) {
                btn.removeAttribute('disabled')
            }
        }
        function reset2G() {
            const btn2 = document.getElementById('btn-result2')
            btn2.innerHTML = 'Copiar'
            removeDisabled(btn2)
        }
        function limparDados() {
            let ssid2G = document.getElementById('ssid')
            let password2G = document.getElementById('password')
            ssid2G.value = ''
            password2G.value = ''

            let ssid5G = document.getElementById('ssid5') || undefined
            let password5G = document.getElementById('password5') || undefined
            if (ssid5G != undefined) {
                ssid5G.value = ''
                password5G.value = ''
            }
        }
        function limparResultado() {
            document.getElementById('result').setAttribute('value', '')
        }
        function cleanBtnCopy(rede) {
            document.getElementById('btn-result2').innerHTML = "Copiado!"
            setTimeout(reset2G, 500)
            
        }
        function copy(rede) {

            const txt = document.getElementById(rede)
            txt.select()
            document.execCommand("copy")
            cleanBtnCopy(rede)
        }
    </script>
</body>

</html>